___
# Identity service
[![Build identity service](https://github.com/UnspokenTeam/Calendar/actions/workflows/build_identity_service.yaml/badge.svg)](https://github.com/UnspokenTeam/Calendar/actions/workflows/build_identity_service.yaml)
___
**Установка и описание**
___
1. **Образец .env файла**
	```
	DATABASE_URL="DATABASE_URL"
	ENVIRONMENT="ENVIRONMENT"
	```
___
2. **Установка**:
	- Доступно несколько способов установки.

    1. **Через docker**
       - Установка осуществляется через **docker**, для установки пакета микросервиса введите и выполните команду:
		```
    	docker pull ghcr.io/unspokenteam/identity_service:latest
 		```
       - Создайте .env файл, укажите его путь в команде и выполните её:
		```
		docker run -d -p 8080=8080 —env-file $PATH_TO_ENV ghcr.io/unspokenteam/identity_service:latest
 		```

	2. **Через poetry**
        - Также возможен локальный запуск при помощи утилиты poetry **без использования docker'a**. Для этого введите и выполните команду:
        ```
    	poetry install
    	```
        - Создайте .env файл в папке микросервиса. Добавьте вызов load_dotenv из модуля dotenv в методе serve в файле main.py и выполните команду:
        ```
        poetry run python main.py
        ```
---
3. **О микросервисе**:
	- Сервис полностью осуществляет взаимодействие с аккаунтами пользователей в календаре.
	- Также под контролем сервиса находится взаимодействие со всеми данными аккаунта пользователя и токенами.
	- Функционал:
        - **login** - **Получение токенов при успешной авторизации**

        - **register** - **Создание токенов при регистрации пользователя**

        - **auth** - **Получение ID аунтефицированного пользователя**

        - **get_new_access_token** - **Получение токена доступа**

        - **generate_tokens** - **Генерация токенов**

		- **get_user_by_id** - **Получение пользователя по ID**

		- **get_users_by_id** - **Получение пользователей по их ID**
			- Реализована **пагинация** (получение пользователей по номеру страницы любого размера)
				- Также возможно получение **полного** списка пользователей при условии **items_per_page = -1**.

		- **get_all_users** - **Получение списка всех пользователей**
			- Реализована **пагинация** (получение пользователей по номеру страницы любого размера)
				- Также возможно получение **полного** списка пользователей при условии **items_per_page = -1**.
			- **Метод доступен только пользователям с типом ADMIN**

		- **update_user** - **Обновление пользователя**

		- **delete_user** - **Удаление пользователя по его ID**

        - **logout** - **Удаление токена пользователя и выход из аккаунта**
---
* **Для каждого метода предусмотрена обработка всевозможных ошибок.** **Подробнее ознакомиться с функционалом можно, прочитав docstring'и к методам.**
---
