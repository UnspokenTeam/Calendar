syntax = "proto3";

import "google/protobuf/timestamp.proto";
import "google/protobuf/empty.proto";
import "user/user.proto";

service InviteService {
  rpc get_invite_by_invite_id(InviteRequestByInviteId) returns (InviteResponse){}
  rpc get_all_invites(GetAllInvitesRequest) returns (InvitesResponse){}
  rpc get_invites_by_author_id(InvitesByAuthorIdRequest) returns (InvitesResponse){}
  rpc get_invites_by_invitee_id(GetInvitesByInviteeIdRequest) returns (InvitesResponse){}
  rpc create_invite(InviteRequest) returns (google.protobuf.Empty){}
  rpc update_invite(InviteRequest) returns (google.protobuf.Empty){}
  rpc delete_invite(DeleteInviteRequest) returns (google.protobuf.Empty){}
}

message InvitesByAuthorIdRequest {
  string author_id = 1;
  GrpcUser requesting_user = 2;
  uint64 page_number = 3;
  int64 items_per_page = 4;
}

message InviteRequestByInviteId {
  string invite_id = 1;
  GrpcUser requesting_user = 2;
}

message GetInvitesByInviteeIdRequest {
  string invitee_id = 1;
  GrpcUser requesting_user = 2;
  uint64 page_number = 3;
  int64 items_per_page = 4;
}

message InviteResponse {
  int32 status_code = 1;
  optional GrpcInvite invite = 2;
  optional string message = 3;
}

message GrpcInvite {
  string id = 1;
  string event_id = 2;
  string author_id = 3;
  string invitee_id = 4;
  InviteStatus status = 5;
  google.protobuf.Timestamp created_at = 6;
  optional google.protobuf.Timestamp deleted_at = 7;
}

message GetAllInvitesRequest {
  GrpcUser requesting_user = 1;
  uint64 page_number = 2;
  int64 items_per_page = 3;
}

message InviteRequest {
  GrpcInvite invite = 1;
  GrpcUser requesting_user = 2;
}

message ListOfInvites {
  repeated GrpcInvite invites = 1;
}

message InvitesResponse{
  int32 status_code = 1;
  optional ListOfInvites invites = 2;
  optional string message = 3;
}

message BaseResponse {
  int32 status_code = 1;
  optional string message = 2;
}

message DeleteInviteRequest {
  string invite_id = 1;
  GrpcUser requesting_user = 2;
}

enum InviteStatus {
  PENDING = 0;
  ACCEPTED = 1;
  REJECTED = 2;
}
